{# DO NOT EDIT -- THIS FILE IS AUTO-GENERATED #}

{% set doctitle = 'Run Elasticsearch in Docker and query with DataStation' %}

{% extends 'docs/layout.tmpl' %}

{% block docbody %}
<div><a href="/docs/">Back to documentation</a></div>

{% raw %}<h1>Run Elasticsearch in Docker and query with DataStation</h1>
<p>This tutorial walks through running Elasticsearch in Docker, creating
an index and loading it with documents, and finally querying it in
DataStation.</p>
<h1>Database initialization [Optional]</h1>
<p>If you want to follow along with this tutorial verbatim, in your
terminal start Elasticsearch in Docker:</p>
<pre><code class="hljs language-bash">$ docker run -p 127.0.0.1:9200:9200 -e &quot;discovery.type=single-node&quot; docker.elastic.co/elasticsearch/elasticsearch:7.16.3
</code></pre>
<p>Then create an index with curl and add some data:</p>
<pre><code class="hljs language-bash">$ curl -H &#x27;Content-Type: application/json&#x27; -XPOST &quot;http://localhost:9200/users/_doc&quot; -d &#x27;{&quot;name&quot;: &quot;Tiara&quot;, &quot;age&quot;: 44}&#x27;
{&quot;_index&quot;:&quot;users&quot;,&quot;_type&quot;:&quot;_doc&quot;,&quot;_id&quot;:&quot;-yI80X4BjZbj9lUqh0G7&quot;,&quot;_version&quot;:1,&quot;result&quot;:&quot;created&quot;,&quot;_shards&quot;:{&quot;total&quot;:2,&quot;successful&quot;:1,&quot;failed&quot;:0},&quot;_seq_no&quot;:1,&quot;_primary_term&quot;:1}
$ curl -H &#x27;Content-Type: application/json&#x27; -XPOST &quot;http://localhost:9200/users/_doc&quot; -d &#x27;{&quot;name&quot;: &quot;Carah&quot;, &quot;age&quot;: 29}&#x27;
{&quot;_index&quot;:&quot;users&quot;,&quot;_type&quot;:&quot;_doc&quot;,&quot;_id&quot;:&quot;_CI80X4BjZbj9lUqyUHI&quot;,&quot;_version&quot;:1,&quot;result&quot;:&quot;created&quot;,&quot;_shards&quot;:{&quot;total&quot;:2,&quot;successful&quot;:1,&quot;failed&quot;:0},&quot;_seq_no&quot;:1,&quot;_primary_term&quot;:1}
</code></pre>
<h1>Data source setup</h1>
<p>Now inside DataStation create a new data source in the left sidebar.</p>
<p><img src="https://cdn.jsdelivr.net/gh/multiprocessio/datastation-documentation@main/tutorials/create-data-source.gif" alt="Creating a new data source" /></p>
<p>Give it a nice name so you easily can find it later. And select Elasticsearch
in the Vendor dropdown.</p>
<p><img src="https://cdn.jsdelivr.net/gh/multiprocessio/datastation-documentation@main/tutorials/create-elasticsearch-data-source.png" alt="Creating a Elasticsearch data source" /></p>
<h2>Host field</h2>
<p>If you are connecting to <code class="hljs">localhost:9200</code> (the default), you can
leave the host field blank. If your port is 9200 then you can always
omit the colon and port and just specify the address.</p>
<h2>Other fields</h2>
<p>Next fill in the username and authentication fields if
necessary. Leaving these fields blank is ok too.</p>
<h2>SSH Proxy [Optional]</h2>
<p>If you want connect to a Elasticsearch database on a remote server through an
SSH proxy, you will need to set up the SSH connection to that server
first. Once you do, you can select that connection in the &quot;Via Server&quot;
dropdown within the data source editor.</p>
<h1>Panel setup</h1>
<p>Now create a new panel and select the Database type.</p>
<p><img src="https://cdn.jsdelivr.net/gh/multiprocessio/datastation-documentation@main/tutorials/create-elasticsearch-database-panel.gif" alt="Create database panel" /></p>
<h2>Run a query</h2>
<p>Enter your query and hit play!</p>
<p><img src="https://cdn.jsdelivr.net/gh/multiprocessio/datastation-documentation@main/tutorials/run-elasticsearch-query.gif" alt="Run Elasticsearch query" /></p>
<p>Note: Ctrl-r is a shortcut for hitting the play button when you are
focused on one panel.</p>
<p>You can always download the results of a panel by hitting the download
button. Or you can reference the results in other panels.</p>
<p><img src="https://cdn.jsdelivr.net/gh/multiprocessio/datastation-documentation@main/tutorials/download-elasticsearch-panel-results.png" alt="Download panel results" /></p>
<h1>Graph the results</h1>
<p>After running the query, a graph button will appear below the panel
next to the New Panel button. Click it to generate a graph based on
this panel.</p>
<p>DataStation tries to guess which columns to graph but it doesn't
always get it right. Select the name and age columns for the x and y
dimensions respectively.</p>
<p><img src="https://cdn.jsdelivr.net/gh/multiprocessio/datastation-documentation@main/tutorials/graph-elasticsearch-database-results.gif" alt="Graph database results" /></p>
{% endraw %}

<div class="about-this-page">
<h4>About this page</h4>
<p>
  See an error or want to add a clarification? This page is
  generated from <a href="https://github.com/multiprocessio/datastation-documentation/blob/main/tutorials/Query_Elasticsearch_with_DataStation.md">this file on Github</a>.
  <br /><br />
  Last edited Apr 07, 2022.
</p>
</div>
{% endblock %}